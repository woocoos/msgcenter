# 配置

## 基于标签的处理路由

保留的标签关键字: 

  - alertname: 提醒名称,也做为事件名称
  - tenant: 租户ID
  - user: 指定接收者,该值为用户ID

### 分组

可以对消息通知进行分组，可以使用groupBy来将多条提醒合合并为一个通知,基于提醒中包含的标签，如果满足groupBy中定义标签名称，那么这些提醒将会合并为一个通知发送给接收器。

有的时候为了能够一次性收集和发送更多的相关信息时，可以通过groupWait参数设置等待时间，如果在等待时间内当前group接收到了新的提醒，这些提醒将会合并为一个通知向receiver发送。

而groupInterval配置，则用于定义相同的Group之间发送提醒通知的时间间隔。

## 接收配置

每一个接收配置(receiver)可以配置多种不同的通道,比如站内信、邮件、短信、钉钉、微信等等.每一种通道对应不同的通知方式.

### 通道配置

常见的通道配置一般分为连接配置与模板配置.

连接配置用于配置通道的连接信息,比如邮件的SMTP配置,短信的账号密码等等.

模板配置用于配置通知的模板,比如邮件的接收人及抄送,邮件体等模板,而短信的则有接收人,消息体模板等等.

### 模板

在接收方式配置中所提及的模板可以是文本模板或者HTML模板,模板中需要使用Go的模板语法.

#### 客制化模板

除了在接收方式配置中配置模板外,还可以客制化模板.客制模板的规则如下:

1. 基于租户模式下,提醒中需要包含租户ID标签,如: `tenant: 1`
2. 基于事件模式下,提醒中需要包含事件名称标签,如: `alertname: cpu_usage`

如果你的提醒中包含了以上标签,那么就可以通知UI功能中,定义消息定义功能,针对不同的事件使用不同的模板. 详见[TODO]()

